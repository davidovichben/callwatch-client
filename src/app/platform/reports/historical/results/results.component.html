<div class="mb-3 flex-between">
  <p class="h1">
    <ng-container *ngIf="dates && dates.from && dates.to">
      <span>{{ 'example_report_for_dates' | t }} </span>
      <span>{{ dates.from|date: 'd/MM/Y' }} - {{ dates.to|date: 'd/MM/Y' }}</span>
    </ng-container>
  </p>
  <div>
    <button mat-flat-button class="ms-2 action-btn" (click)="openInformationDialog()">
      <mat-icon class="ms-1">error_outline</mat-icon>
      <span>{{ 'information' | t }}</span>
    </button>
    <button mat-flat-button class="ms-2 action-btn" (click)="produce()">
      <mat-icon class="ms-1">refresh</mat-icon>
      <span>{{ 'refresh' | t }}</span>
    </button>
    <button mat-flat-button class="ms-2 action-btn" (click)="openColumnsDialog()">
      <mat-icon class="ms-1">grid_on</mat-icon>
      <span>{{ 'columns' | t }}</span>
    </button>
    <button mat-flat-button class="ms-2 action-btn" [routerLink]="['..', 'criteria']">
      <mat-icon class="ms-1">settings</mat-icon>
      <span>{{ 'settings' | t }}</span>
    </button>
    <button mat-flat-button class="action-btn" [matMenuTriggerFor]="downloadMenu">
      <mat-icon class="ms-1">download</mat-icon>
      <span>{{ 'download' | t }}</span>
    </button>
    <mat-menu #downloadMenu="matMenu">
      <button mat-menu-item (click)="download(format)" *ngFor="let format of formats">{{ format }}</button>
    </mat-menu>
  </div>
</div>
<div class="loader inline" *ngIf="isProducing"></div>
<table class="table" *ngIf="!isProducing">
  <thead>
  <tr *ngIf="results.labels.titles.length > 0">
    <th></th>
    <th *ngFor="let title of results.labels.titles" [colSpan]="title.length">{{ title.name }}</th>
  </tr>
  <tr *ngIf="results.labels.subTitles.length > 0">
    <th></th>
    <th *ngFor="let subTitle of results.labels.subTitles" [colSpan]="subTitle.length">{{ subTitle.name }}</th>
  </tr>
  <tr>
    <th></th>
    <th *ngFor="let column of results.labels.columns" [colSpan]="column.length">{{ column.name }}</th>
  </tr>
  <tr *ngIf="results.labels.columnTypes.length > 0">
    <th></th>
    <th *ngFor="let type of results.labels.columnTypes">{{ type | t }}</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let row of results.rows; let rowIndex = index">
    <td *ngFor="let value of row; let first = first; let index = index" [ngStyle]="first ? null : styles[rowIndex][index]">
<!--      {{ first && timeSpace === 'day_in_week' ? (value | lowercase | t) : value }}-->
      {{ value }}
    </td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td></td>
    <td *ngFor="let total of results.totals">{{ total ?? 0 }}</td>
  </tr>
  </tfoot>
</table>
