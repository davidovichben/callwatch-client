<form [formGroup]="formGroup" (ngSubmit)="submit()">
  <div class="form-header">
    <p class="h1">{{ permissionId ? ('edit_permission' | t) : ('add_permission' | t) }}</p>
    <div>
      <button type="button" class="ms-2 btn grey-btn" [routerLink]="['/platform', 'permissions']">{{ 'cancel' | t }}</button>
      <button type="submit" class="btn blue-btn">{{ 'save' | t }}</button>
    </div>
  </div>
  <div class="form-body">
    <div class="row">
      <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
        <mat-form-field>
          <mat-label>{{ 'permission_name' | t }}</mat-label>
          <input matInput type="text" formControlName="name" required>
          <mat-error *ngIf="formGroup.get('name').errors?.required">{{ errorMessages.required | t }}</mat-error>
          <mat-error *ngIf="formGroup.get('name').errors?.exists">{{ errorMessages.exists | t }}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
        <mat-form-field>
          <mat-label>{{ 'description' | t }}</mat-label>
          <input matInput type="text" formControlName="description">
        </mat-form-field>
      </div>
    </div>
    <div>
      <button class="ms-3 btn blue-btn" type="button" (click)="checkAll(true)">{{ 'check_all' | t }}</button>
      <button class="btn grey-btn" type="button" (click)="checkAll(false)">{{ 'clear' | t }}</button>
    </div>
    <div class="mt-3">
      <table class="table table-striped simple-table">
        <thead>
        <tr>
          <th>{{ 'modules' | t }}</th>
          <th>{{ 'check_all' | t }}</th>
          <th>{{ 'view' | t }}</th>
          <th>{{ 'create' | t }}</th>
          <th>{{ 'edit' | t }}</th>
          <th>{{ 'delete' | t }}</th>
        </tr>
        </thead>
        <tbody formArrayName="modules">
        <tr *ngFor="let module of formGroup.get('modules')['controls']; let index = index" [formGroupName]="index">
          <td>{{ module.get('name').value | t }}</td>
          <td>
            <mat-checkbox formControlName="all"></mat-checkbox>
          </td>
          <td *ngFor="let action of actions">
            <mat-checkbox [formControlName]="action"></mat-checkbox>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</form>
